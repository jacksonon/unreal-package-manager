export type UiLanguage = 'system' | 'en' | 'zh' | 'ja' | 'ko' | 'fr' | 'de' | 'ru'
export type ResolvedLanguage = Exclude<UiLanguage, 'system'>

type Vars = Record<string, string | number>

const en = {
  'app.title': 'Unreal Package Manager',

  'tabs.registry': 'My Registry',
  'tabs.project': 'In Project',
  'tabs.updates': 'Updates',

  'search.registry.placeholder': 'Search registry...',
  'search.filter.placeholder': 'Filter...',

  'actions.selectProject': 'Select Project',
  'actions.refresh': 'Refresh',
  'actions.settings': 'Settings',

  'meta.project': 'Project',
  'meta.registry': 'Registry',
  'meta.pluginsRoot': 'Plugins Root',
  'meta.unselected': 'Not selected',
  'meta.projectNpmrc': '(project .npmrc)',
  'meta.unknown': '-',

  'list.count': '{shown} / {total} items',
  'list.loading': ' · loading…',
  'list.context.show': 'Show details',
  'list.context.hide': 'Hide details',

  'projects.title': 'Projects',
  'projects.search.placeholder': 'Search folders...',
  'projects.empty': 'No recent projects.',
  'projects.disabled': 'History is disabled.',
  'projects.empty.desc': 'Click “Select Project” above to add one.',
  'projects.disabled.desc': 'Enable “Remember recent projects” in Settings to show history here.',
  'projects.toggle.show': 'Show projects',
  'projects.toggle.hide': 'Hide projects',
  'projects.context.title': 'Project details',
  'projects.context.show': 'Show project details',
  'projects.context.hide': 'Hide project details',
  'projects.remove': 'Remove from history',
  'projects.remove.confirm': 'Remove this path from history?\n\n{path}',

  'status.remote': 'REGISTRY',
  'status.installed': 'INSTALLED',
  'status.update_available': 'UPDATE',
  'status.missing': 'MISSING',

  'empty.noProject.title': 'No project selected',
  'empty.noProject.desc': 'Click “Select Project” in the top-right to continue.',
  'empty.registry.start.title': 'Start searching',
  'empty.registry.start.desc': 'Type a keyword above to search.',
  'empty.registry.noResults.title': 'No packages found',
  'empty.registry.noResults.desc': 'Try a more specific keyword, or check your Registry settings and filters.',
  'empty.registry.noResults.help.header': 'If you use the public registry:',
  'empty.registry.noResults.help.save': '- Click “Save” in Settings (writes project .npmrc)',
  'empty.registry.noResults.help.query': '- Try a more specific query',
  'empty.registry.noResults.help.filter': '- Disable “UE Only” filter (public packages usually lack UE keywords)',
  'empty.updates.title': 'No updates',
  'empty.updates.desc': 'This project has no updatable packages.',
  'empty.project.title': 'Empty list',
  'empty.project.desc': 'This project has no installed packages.',

  'detail.selectPrompt': 'Select a package on the left',

  'log.title': 'LOG',
  'log.noLog': 'No log.',
  'log.copy': 'Copy',
  'log.copied': 'Copied',
  'log.copyFailed': 'Copy failed',
  'log.toggle.show': 'Show',
  'log.toggle.hide': 'Hide',
  'log.clear': 'Clear',

  'detail.installed': 'installed {version}',
  'detail.notInstalled': 'not installed',
  'detail.latest': ' · latest {version}',
  'detail.versionTag.placeholder': 'version/tag (default latest)',

  'detail.action.install': 'Install',
  'detail.action.update': 'Update',
  'detail.action.remove': 'Remove',
  'detail.action.syncLinks': 'Sync Links',

  'detail.installKind.title': 'dependencies: runtime (recommended); devDependencies: dev/build only',
  'detail.installKind.runtime': 'dependencies (recommended)',
  'detail.installKind.dev': 'devDependencies (dev/build)',
  'detail.installKind.hint': 'Not sure? UE plugin packages usually use dependencies; tooling/scripts use devDependencies.',

  'detail.tabs.info': 'INFO',
  'detail.tabs.readme': 'README',
  'detail.tabs.versions': 'VERSIONS',
  'detail.info.version': 'Version',
  'detail.info.license': 'License',
  'detail.info.author': 'Author',
  'detail.info.homepage': 'Homepage',
  'detail.info.repository': 'Repository',
  'detail.info.docs': 'Docs',
  'detail.info.marketplace': 'Marketplace',
  'detail.info.support': 'Support',
  'detail.info.createdBy': 'CreatedBy',
  'detail.noReadme': 'No readme.',
  'detail.noVersions': 'No versions.',

  'errors.noElectron':
    'This page is not running inside the Electron app (preload not injected), so folder selection / npm / install cannot work. Please open in the Electron window.',

  'warn.noPackageJson': 'package.json not found (create it in project root or specify working dir)',
  'warn.selectProjectDir': 'Please select an Unreal project directory',
  'warn.projectDirMissing': 'Project directory does not exist: {dir}',
  'warn.noUproject': 'Tip: .uproject not found in this directory (you can still manage package.json & Plugins/)',
  'warn.npmLsFailed': 'npm ls failed',
  'warn.npmOutdatedFailed': 'npm outdated failed',
  'warn.npmLsJsonParse': 'Failed to parse npm ls JSON',
  'warn.npmOutdatedJsonParse': 'Failed to parse npm outdated JSON',

  'settings.title': 'Settings',
  'settings.close': 'Close',
  'settings.nav.appearance': 'Appearance',
  'settings.nav.registry': 'Registry (.npmrc)',
  'settings.nav.npm': 'NPM',
  'settings.nav.linking': 'Linking',
  'settings.writesTo': 'Writes to:',

  'settings.appearance.title': 'Appearance',
  'settings.appearance.theme': 'Theme',
  'settings.appearance.theme.system': 'System',
  'settings.appearance.theme.dark': 'Dark',
  'settings.appearance.theme.light': 'Light',
  'settings.appearance.theme.hint': 'Preview immediately; persists after saving.',
  'settings.appearance.language': 'Language',
  'settings.appearance.language.system': 'System',
  'settings.appearance.language.en': 'English',
  'settings.appearance.language.zh': '中文',
  'settings.appearance.language.ja': '日本語',
  'settings.appearance.language.ko': '한국어',
  'settings.appearance.language.fr': 'Français',
  'settings.appearance.language.de': 'Deutsch',
  'settings.appearance.language.ru': 'Русский',
  'settings.appearance.projects': 'Projects',
  'settings.appearance.projects.remember': 'Remember recent projects (folder paths)',
  'settings.appearance.projects.clear': 'Clear project history',
  'settings.appearance.projects.clear.confirm': 'Clear saved recent projects and last project path?',
  'settings.appearance.ueOnly': 'UE Only Filter',
  'settings.appearance.ueOnly.label': 'Show Unreal plugin packages only (keywords / local *.uplugin)',
  'settings.appearance.logPanel': 'Log Panel',
  'settings.appearance.logPanel.label': 'Show bottom log panel (writes logs after install/uninstall/sync)',

  'settings.registry.title': 'Project .npmrc',
  'settings.registry.needProject': 'Select a project first (writes to <Project>/.npmrc).',
  'settings.registry.placeholder.registry': 'e.g. https://registry.npmjs.org/',
  'settings.registry.placeholder.proxy': 'e.g. http://127.0.0.1:7890',
  'settings.registry.scoped.title': 'Scoped Registries',
  'settings.registry.scoped.add': 'Add Scope',
  'settings.registry.scoped.prompt': 'Scope (e.g. @myco)',
  'settings.registry.scoped.placeholder': 'registry url',
  'settings.registry.scoped.remove': 'Remove',
  'settings.registry.scoped.empty': 'No scoped registry',
  'settings.registry.test.title': 'Registry Test',
  'settings.registry.test.hint': 'Quickly checks whether registry/proxy/auth works (uses project .npmrc).',

  'settings.npm.title': 'NPM',
  'settings.npm.path': 'Npm Executable Path',
  'settings.npm.path.placeholder': 'Empty = use npm from PATH (Windows: npm.cmd)',

  'settings.linking.title': 'Linking',
  'settings.linking.pluginsRoot': 'Plugins Root Dir',
  'settings.linking.pluginsRoot.placeholder': 'Empty = use <Project>/Plugins',
  'settings.linking.pick': 'Choose…',
  'settings.linking.reset': 'Reset',
  'settings.linking.pickDialogTitle': 'Select Plugins root (default <Project>/Plugins)',
  'settings.linking.autoLink': 'Auto Link UE Plugins',
  'settings.linking.autoLink.label': 'Auto sync node_modules → Plugins/ links after install/uninstall',
  'settings.linking.autoLink.hint':
    'Windows uses Junction (mklink /J) by default; macOS/Linux uses symlink. You can switch to copy mode.',
  'settings.linking.mode.link': 'Link (symlink/junction)',
  'settings.linking.mode.copy': 'Copy',

  'settings.footer.reload': 'Reload',
  'settings.footer.save': 'Save',

  'dialogs.selectProject.title': 'Select Unreal project folder (contains .uproject)',
  'dialogs.selectDir.title': 'Select folder',

  'alert.title': 'Alert',
  'alert.ok': 'OK',

  'links.log.title': 'Sync Links',
  'links.log.ok': 'ok: {value}',
  'links.log.linked': 'linked: {value}',
  'links.log.removed': 'removed: {value}',
  'links.log.warnings': 'warnings:',
  'links.log.error': 'error: {value}'
} as const

export type MessageKey = keyof typeof en

const zh: Record<MessageKey, string> = {
  'app.title': 'Unreal Package Manager',

  'tabs.registry': '我的 Registry',
  'tabs.project': '项目内',
  'tabs.updates': '可更新',

  'search.registry.placeholder': '搜索 registry...',
  'search.filter.placeholder': '过滤...',

  'actions.selectProject': '选择项目',
  'actions.refresh': '刷新',
  'actions.settings': '设置',

  'meta.project': 'Project',
  'meta.registry': 'Registry',
  'meta.pluginsRoot': 'Plugins Root',
  'meta.unselected': '未选择',
  'meta.projectNpmrc': '(project .npmrc)',
  'meta.unknown': '-',

  'list.count': '{shown} / {total} items',
  'list.loading': ' · loading…',
  'list.context.show': '展开',
  'list.context.hide': '收起',

  'projects.title': '项目',
  'projects.search.placeholder': '搜索文件夹...',
  'projects.empty': '暂无历史项目。',
  'projects.disabled': '已关闭历史记录。',
  'projects.empty.desc': '点击上方“选择项目”添加一个。',
  'projects.disabled.desc': '在设置中开启“记住最近项目”后会在这里显示历史。',
  'projects.toggle.show': '展开项目栏',
  'projects.toggle.hide': '收起项目栏',
  'projects.context.title': '项目详情',
  'projects.context.show': '展开项目详情',
  'projects.context.hide': '收起项目详情',
  'projects.remove': '从历史中移除',
  'projects.remove.confirm': '确认从历史中移除该路径？\n\n{path}',

  'status.remote': '源',
  'status.installed': '已安装',
  'status.update_available': '更新',
  'status.missing': '缺失',

  'empty.noProject.title': '未选择项目',
  'empty.noProject.desc': '点击右上角“选择项目”后查看内容。',
  'empty.registry.start.title': '开始搜索',
  'empty.registry.start.desc': '在上方输入关键词进行搜索。',
  'empty.registry.noResults.title': '未找到包',
  'empty.registry.noResults.desc': '试试更具体的关键词，或检查 Registry 配置与过滤条件。',
  'empty.registry.noResults.help.header': '如果你配置的是公网源：',
  'empty.registry.noResults.help.save': '- 请先在设置里点“保存”（写入项目 .npmrc）',
  'empty.registry.noResults.help.query': '- 试试输入更具体的搜索词',
  'empty.registry.noResults.help.filter': '- 关闭设置里的 UE Only 过滤（公网包通常不含 UE 关键字）',
  'empty.updates.title': '暂无更新',
  'empty.updates.desc': '当前项目没有可更新的包。',
  'empty.project.title': '空列表',
  'empty.project.desc': '当前项目还没有安装任何包。',

  'detail.selectPrompt': '请选择左侧包',

  'log.title': '日志',
  'log.noLog': '无日志。',
  'log.copy': '复制',
  'log.copied': '已复制',
  'log.copyFailed': '复制失败',
  'log.toggle.show': '展示',
  'log.toggle.hide': '隐藏',
  'log.clear': '清空',

  'detail.installed': 'installed {version}',
  'detail.notInstalled': 'not installed',
  'detail.latest': ' · latest {version}',
  'detail.versionTag.placeholder': 'version/tag（默认 latest）',

  'detail.action.install': '安装',
  'detail.action.update': '更新',
  'detail.action.remove': '移除',
  'detail.action.syncLinks': '同步链接',

  'detail.installKind.title': 'dependencies：项目运行时需要（推荐）；devDependencies：仅开发/构建阶段需要',
  'detail.installKind.runtime': 'dependencies（推荐）',
  'detail.installKind.dev': 'devDependencies（开发/构建）',
  'detail.installKind.hint': '不确定选哪个：一般 UE 插件包用 dependencies；只有工具链/脚本才放 devDependencies。',

  'detail.tabs.info': '信息',
  'detail.tabs.readme': 'README',
  'detail.tabs.versions': '版本',
  'detail.info.version': 'Version',
  'detail.info.license': 'License',
  'detail.info.author': 'Author',
  'detail.info.homepage': 'Homepage',
  'detail.info.repository': 'Repository',
  'detail.info.docs': 'Docs',
  'detail.info.marketplace': 'Marketplace',
  'detail.info.support': 'Support',
  'detail.info.createdBy': 'CreatedBy',
  'detail.noReadme': '无 readme。',
  'detail.noVersions': '无版本列表。',

  'errors.noElectron': '当前页面未运行在 Electron App 中（preload 未注入），无法执行文件夹选择 / npm / 安装等操作。请用 Electron 窗口打开。',

  'warn.noPackageJson': 'package.json 未找到（请在项目根目录创建或指定 working dir）',
  'warn.selectProjectDir': '请选择 Unreal 项目目录',
  'warn.projectDirMissing': '项目目录不存在：{dir}',
  'warn.noUproject': '提示：未在该目录下找到 .uproject 文件（仍可管理 package.json & Plugins/）',
  'warn.npmLsFailed': 'npm ls failed',
  'warn.npmOutdatedFailed': 'npm outdated failed',
  'warn.npmLsJsonParse': 'npm ls JSON 解析失败',
  'warn.npmOutdatedJsonParse': 'npm outdated JSON 解析失败',

  'settings.title': '设置',
  'settings.close': '关闭',
  'settings.nav.appearance': '外观',
  'settings.nav.registry': '源（.npmrc）',
  'settings.nav.npm': 'NPM',
  'settings.nav.linking': '链接',
  'settings.writesTo': '配置会写入：',

  'settings.appearance.title': '外观',
  'settings.appearance.theme': '主题',
  'settings.appearance.theme.system': '跟随系统',
  'settings.appearance.theme.dark': '暗色',
  'settings.appearance.theme.light': '亮色',
  'settings.appearance.theme.hint': '立即预览；保存后会持久化',
  'settings.appearance.language': '语言',
  'settings.appearance.language.system': '跟随系统',
  'settings.appearance.language.en': 'English',
  'settings.appearance.language.zh': '中文',
  'settings.appearance.language.ja': '日本語',
  'settings.appearance.language.ko': '한국어',
  'settings.appearance.language.fr': 'Français',
  'settings.appearance.language.de': 'Deutsch',
  'settings.appearance.language.ru': 'Русский',
  'settings.appearance.projects': '项目',
  'settings.appearance.projects.remember': '记住最近项目（文件夹路径）',
  'settings.appearance.projects.clear': '清空项目历史',
  'settings.appearance.projects.clear.confirm': '确认清空已保存的历史项目和上次项目路径？',
  'settings.appearance.ueOnly': 'UE Only 过滤',
  'settings.appearance.ueOnly.label': '只显示 Unreal 插件包（按关键字/本地 *.uplugin 识别）',
  'settings.appearance.logPanel': '日志面板',
  'settings.appearance.logPanel.label': '显示底部日志面板（安装/卸载/同步后会写入日志）',

  'settings.registry.title': '项目 .npmrc',
  'settings.registry.needProject': '请选择项目后再配置源（会写入 <Project>/.npmrc）。',
  'settings.registry.placeholder.registry': '例如 https://registry.npmjs.org/',
  'settings.registry.placeholder.proxy': '例如 http://127.0.0.1:7890',
  'settings.registry.scoped.title': 'Scoped Registries',
  'settings.registry.scoped.add': '添加 Scope',
  'settings.registry.scoped.prompt': 'Scope（例如 @myco）',
  'settings.registry.scoped.placeholder': 'registry url',
  'settings.registry.scoped.remove': '移除',
  'settings.registry.scoped.empty': '无 scoped registry',
  'settings.registry.test.title': 'Registry 测试',
  'settings.registry.test.hint': '用于快速判断 registry/proxy/auth 是否可用（使用项目 .npmrc）。',

  'settings.npm.title': 'NPM',
  'settings.npm.path': 'Npm 可执行文件路径',
  'settings.npm.path.placeholder': '空=使用 PATH 中的 npm（Windows: npm.cmd）',

  'settings.linking.title': '链接',
  'settings.linking.pluginsRoot': 'Plugins 根目录',
  'settings.linking.pluginsRoot.placeholder': '空=使用 <Project>/Plugins',
  'settings.linking.pick': '选择…',
  'settings.linking.reset': '重置',
  'settings.linking.pickDialogTitle': '选择 Plugins 根目录（默认 <Project>/Plugins）',
  'settings.linking.autoLink': '自动链接 UE 插件',
  'settings.linking.autoLink.label': '安装/卸载后自动同步 node_modules → Plugins/ 链接',
  'settings.linking.autoLink.hint': 'Windows 默认使用 Junction（mklink /J），macOS/Linux 使用 symlink；也可切换为拷贝模式。',
  'settings.linking.mode.link': 'Link（symlink/junction）',
  'settings.linking.mode.copy': 'Copy',

  'settings.footer.reload': '重新加载',
  'settings.footer.save': '保存',

  'dialogs.selectProject.title': '选择 Unreal 项目文件夹（包含 .uproject 的目录）',
  'dialogs.selectDir.title': '选择文件夹',

  'alert.title': '提示',
  'alert.ok': '确定',

  'links.log.title': '同步链接',
  'links.log.ok': 'ok: {value}',
  'links.log.linked': 'linked: {value}',
  'links.log.removed': 'removed: {value}',
  'links.log.warnings': 'warnings:',
  'links.log.error': 'error: {value}'
}

const ja: Record<MessageKey, string> = {
  'app.title': 'Unreal Package Manager',

  'tabs.registry': 'レジストリ',
  'tabs.project': 'プロジェクト内',
  'tabs.updates': '更新',

  'search.registry.placeholder': 'レジストリ検索...',
  'search.filter.placeholder': 'フィルター...',

  'actions.selectProject': 'プロジェクト選択',
  'actions.refresh': '更新',
  'actions.settings': '設定',

  'meta.project': 'Project',
  'meta.registry': 'Registry',
  'meta.pluginsRoot': 'Plugins Root',
  'meta.unselected': '未選択',
  'meta.projectNpmrc': '(project .npmrc)',
  'meta.unknown': '-',

  'list.count': '{shown} / {total} items',
  'list.loading': ' · loading…',
  'list.context.show': '詳細を表示',
  'list.context.hide': '詳細を非表示',

  'projects.title': 'プロジェクト',
  'projects.search.placeholder': 'フォルダ検索...',
  'projects.empty': '最近のプロジェクトがありません。',
  'projects.disabled': '履歴は無効です。',
  'projects.empty.desc': '上の「プロジェクト選択」をクリックして追加します。',
  'projects.disabled.desc': '設定で「最近のプロジェクトを記憶」を有効にすると履歴が表示されます。',
  'projects.toggle.show': 'プロジェクトを表示',
  'projects.toggle.hide': 'プロジェクトを非表示',
  'projects.context.title': 'プロジェクト詳細',
  'projects.context.show': '詳細を表示',
  'projects.context.hide': '詳細を非表示',
  'projects.remove': '履歴から削除',
  'projects.remove.confirm': 'このパスを履歴から削除しますか？\n\n{path}',

  'status.remote': 'REGISTRY',
  'status.installed': 'インストール済み',
  'status.update_available': '更新',
  'status.missing': '欠落',

  'empty.noProject.title': 'プロジェクト未選択',
  'empty.noProject.desc': '右上の「プロジェクト選択」をクリックしてください。',
  'empty.registry.start.title': '検索を開始',
  'empty.registry.start.desc': '上部でキーワードを入力して検索します。',
  'empty.registry.noResults.title': '見つかりません',
  'empty.registry.noResults.desc': 'より具体的なキーワードにするか、レジストリ設定とフィルターを確認してください。',
  'empty.registry.noResults.help.header': '公開レジストリを使う場合：',
  'empty.registry.noResults.help.save': '- 設定で「保存」をクリック（プロジェクト .npmrc に書き込み）',
  'empty.registry.noResults.help.query': '- より具体的な検索語を試す',
  'empty.registry.noResults.help.filter': '- 「UE Only」フィルターを無効化（公開パッケージは UE キーワードが少ない）',
  'empty.updates.title': '更新なし',
  'empty.updates.desc': 'このプロジェクトに更新可能なパッケージはありません。',
  'empty.project.title': '空',
  'empty.project.desc': 'このプロジェクトにはインストール済みパッケージがありません。',

  'detail.selectPrompt': '左側からパッケージを選択してください',

  'log.title': 'ログ',
  'log.noLog': 'ログなし。',
  'log.copy': 'コピー',
  'log.copied': 'コピーしました',
  'log.copyFailed': 'コピー失敗',
  'log.toggle.show': '表示',
  'log.toggle.hide': '非表示',
  'log.clear': 'クリア',

  'detail.installed': 'installed {version}',
  'detail.notInstalled': 'not installed',
  'detail.latest': ' · latest {version}',
  'detail.versionTag.placeholder': 'version/tag（既定 latest）',

  'detail.action.install': 'インストール',
  'detail.action.update': '更新',
  'detail.action.remove': '削除',
  'detail.action.syncLinks': 'リンク同期',

  'detail.installKind.title': 'dependencies: 実行時（推奨）; devDependencies: 開発/ビルドのみ',
  'detail.installKind.runtime': 'dependencies（推奨）',
  'detail.installKind.dev': 'devDependencies（開発/ビルド）',
  'detail.installKind.hint': '迷ったら：UE プラグインは dependencies、ツール/スクリプトは devDependencies。',

  'detail.tabs.info': '情報',
  'detail.tabs.readme': 'README',
  'detail.tabs.versions': 'バージョン',
  'detail.info.version': 'Version',
  'detail.info.license': 'License',
  'detail.info.author': 'Author',
  'detail.info.homepage': 'Homepage',
  'detail.info.repository': 'Repository',
  'detail.info.docs': 'Docs',
  'detail.info.marketplace': 'Marketplace',
  'detail.info.support': 'Support',
  'detail.info.createdBy': 'CreatedBy',
  'detail.noReadme': 'README なし。',
  'detail.noVersions': 'バージョンなし。',

  'errors.noElectron':
    'このページは Electron アプリ内で動作していません（preload 未注入）。フォルダ選択 / npm / インストールは利用できません。Electron ウィンドウで開いてください。',

  'warn.noPackageJson': 'package.json が見つかりません（プロジェクト直下に作成するか working dir を指定してください）',
  'warn.selectProjectDir': 'Unreal プロジェクトディレクトリを選択してください',
  'warn.projectDirMissing': 'プロジェクトディレクトリが存在しません: {dir}',
  'warn.noUproject': 'ヒント: このディレクトリに .uproject が見つかりません（package.json & Plugins/ は管理可能）',
  'warn.npmLsFailed': 'npm ls failed',
  'warn.npmOutdatedFailed': 'npm outdated failed',
  'warn.npmLsJsonParse': 'npm ls の JSON 解析に失敗しました',
  'warn.npmOutdatedJsonParse': 'npm outdated の JSON 解析に失敗しました',

  'settings.title': '設定',
  'settings.close': '閉じる',
  'settings.nav.appearance': '外観',
  'settings.nav.registry': 'レジストリ（.npmrc）',
  'settings.nav.npm': 'NPM',
  'settings.nav.linking': 'リンク',
  'settings.writesTo': '書き込み先：',

  'settings.appearance.title': '外観',
  'settings.appearance.theme': 'テーマ',
  'settings.appearance.theme.system': 'システム',
  'settings.appearance.theme.dark': 'ダーク',
  'settings.appearance.theme.light': 'ライト',
  'settings.appearance.theme.hint': '即時プレビュー；保存後に永続化します。',
  'settings.appearance.language': '言語',
  'settings.appearance.language.system': 'システム',
  'settings.appearance.language.en': 'English',
  'settings.appearance.language.zh': '中文',
  'settings.appearance.language.ja': '日本語',
  'settings.appearance.language.ko': '한국어',
  'settings.appearance.language.fr': 'Français',
  'settings.appearance.language.de': 'Deutsch',
  'settings.appearance.language.ru': 'Русский',
  'settings.appearance.projects': 'プロジェクト',
  'settings.appearance.projects.remember': '最近のプロジェクト（フォルダパス）を記憶する',
  'settings.appearance.projects.clear': 'プロジェクト履歴を消去',
  'settings.appearance.projects.clear.confirm': '保存された最近のプロジェクトと最後のパスを消去しますか？',
  'settings.appearance.ueOnly': 'UE Only フィルター',
  'settings.appearance.ueOnly.label': 'Unreal プラグインのみ表示（キーワード / ローカル *.uplugin）',
  'settings.appearance.logPanel': 'ログパネル',
  'settings.appearance.logPanel.label': '下部ログパネルを表示（インストール/削除/同期後にログ更新）',

  'settings.registry.title': 'プロジェクト .npmrc',
  'settings.registry.needProject': '先にプロジェクトを選択してください（<Project>/.npmrc に書き込み）。',
  'settings.registry.placeholder.registry': '例: https://registry.npmjs.org/',
  'settings.registry.placeholder.proxy': '例: http://127.0.0.1:7890',
  'settings.registry.scoped.title': 'スコープ別レジストリ',
  'settings.registry.scoped.add': 'スコープ追加',
  'settings.registry.scoped.prompt': 'Scope（例: @myco）',
  'settings.registry.scoped.placeholder': 'registry url',
  'settings.registry.scoped.remove': '削除',
  'settings.registry.scoped.empty': 'スコープ別レジストリなし',
  'settings.registry.test.title': 'レジストリテスト',
  'settings.registry.test.hint': 'registry/proxy/auth の可用性を簡易確認（プロジェクト .npmrc を使用）。',

  'settings.npm.title': 'NPM',
  'settings.npm.path': 'Npm 実行ファイルパス',
  'settings.npm.path.placeholder': '空=PATH の npm を使用（Windows: npm.cmd）',

  'settings.linking.title': 'リンク',
  'settings.linking.pluginsRoot': 'Plugins ルート',
  'settings.linking.pluginsRoot.placeholder': '空=<Project>/Plugins を使用',
  'settings.linking.pick': '選択…',
  'settings.linking.reset': 'リセット',
  'settings.linking.pickDialogTitle': 'Plugins ルートを選択（既定 <Project>/Plugins）',
  'settings.linking.autoLink': 'UE プラグイン自動リンク',
  'settings.linking.autoLink.label': 'インストール/削除後に node_modules → Plugins/ リンクを自動同期',
  'settings.linking.autoLink.hint': 'Windows は既定で Junction（mklink /J）、macOS/Linux は symlink。コピーにも切替可能です。',
  'settings.linking.mode.link': 'Link（symlink/junction）',
  'settings.linking.mode.copy': 'Copy',

  'settings.footer.reload': '再読み込み',
  'settings.footer.save': '保存',

  'dialogs.selectProject.title': 'Unreal プロジェクトフォルダを選択（.uproject を含む）',
  'dialogs.selectDir.title': 'フォルダを選択',

  'alert.title': '通知',
  'alert.ok': 'OK',

  'links.log.title': 'リンク同期',
  'links.log.ok': 'ok: {value}',
  'links.log.linked': 'linked: {value}',
  'links.log.removed': 'removed: {value}',
  'links.log.warnings': 'warnings:',
  'links.log.error': 'error: {value}'
}

const ko: Record<MessageKey, string> = {
  'app.title': 'Unreal Package Manager',

  'tabs.registry': '레지스트리',
  'tabs.project': '프로젝트',
  'tabs.updates': '업데이트',

  'search.registry.placeholder': '레지스트리 검색...',
  'search.filter.placeholder': '필터...',

  'actions.selectProject': '프로젝트 선택',
  'actions.refresh': '새로고침',
  'actions.settings': '설정',

  'meta.project': 'Project',
  'meta.registry': 'Registry',
  'meta.pluginsRoot': 'Plugins Root',
  'meta.unselected': '미선택',
  'meta.projectNpmrc': '(project .npmrc)',
  'meta.unknown': '-',

  'list.count': '{shown} / {total} items',
  'list.loading': ' · loading…',
  'list.context.show': '펼치기',
  'list.context.hide': '접기',

  'projects.title': '프로젝트',
  'projects.search.placeholder': '폴더 검색...',
  'projects.empty': '최근 프로젝트가 없습니다.',
  'projects.disabled': '기록이 비활성화되었습니다.',
  'projects.empty.desc': '위의 “프로젝트 선택”을 눌러 추가하세요.',
  'projects.disabled.desc': '설정에서 “최근 프로젝트 기억”을 켜면 여기에 표시됩니다.',
  'projects.toggle.show': '프로젝트 표시',
  'projects.toggle.hide': '프로젝트 숨기기',
  'projects.context.title': '프로젝트 정보',
  'projects.context.show': '정보 표시',
  'projects.context.hide': '정보 숨기기',
  'projects.remove': '기록에서 제거',
  'projects.remove.confirm': '이 경로를 기록에서 제거할까요?\n\n{path}',

  'status.remote': '레지스트리',
  'status.installed': '설치됨',
  'status.update_available': '업데이트',
  'status.missing': '누락',

  'empty.noProject.title': '프로젝트가 선택되지 않았습니다',
  'empty.noProject.desc': '오른쪽 상단의 “프로젝트 선택”을 클릭하세요.',
  'empty.registry.start.title': '검색 시작',
  'empty.registry.start.desc': '위에서 키워드를 입력해 검색하세요.',
  'empty.registry.noResults.title': '패키지를 찾을 수 없습니다',
  'empty.registry.noResults.desc': '더 구체적인 키워드를 사용하거나 레지스트리 설정/필터를 확인하세요.',
  'empty.registry.noResults.help.header': '공개 레지스트리를 사용하는 경우:',
  'empty.registry.noResults.help.save': '- 설정에서 “저장”을 클릭(프로젝트 .npmrc에 기록)',
  'empty.registry.noResults.help.query': '- 더 구체적인 검색어를 시도',
  'empty.registry.noResults.help.filter': '- “UE Only” 필터를 끄기(공개 패키지는 UE 키워드가 적음)',
  'empty.updates.title': '업데이트 없음',
  'empty.updates.desc': '이 프로젝트에 업데이트 가능한 패키지가 없습니다.',
  'empty.project.title': '비어 있음',
  'empty.project.desc': '이 프로젝트에는 설치된 패키지가 없습니다.',

  'detail.selectPrompt': '왼쪽에서 패키지를 선택하세요',

  'log.title': '로그',
  'log.noLog': '로그 없음.',
  'log.copy': '복사',
  'log.copied': '복사됨',
  'log.copyFailed': '복사 실패',
  'log.toggle.show': '표시',
  'log.toggle.hide': '숨기기',
  'log.clear': '지우기',

  'detail.installed': 'installed {version}',
  'detail.notInstalled': 'not installed',
  'detail.latest': ' · latest {version}',
  'detail.versionTag.placeholder': 'version/tag (기본 latest)',

  'detail.action.install': '설치',
  'detail.action.update': '업데이트',
  'detail.action.remove': '제거',
  'detail.action.syncLinks': '링크 동기화',

  'detail.installKind.title': 'dependencies: 런타임(권장); devDependencies: 개발/빌드 전용',
  'detail.installKind.runtime': 'dependencies(권장)',
  'detail.installKind.dev': 'devDependencies(개발/빌드)',
  'detail.installKind.hint': '확실치 않다면: UE 플러그인은 dependencies, 도구/스크립트는 devDependencies.',

  'detail.tabs.info': '정보',
  'detail.tabs.readme': 'README',
  'detail.tabs.versions': '버전',
  'detail.info.version': 'Version',
  'detail.info.license': 'License',
  'detail.info.author': 'Author',
  'detail.info.homepage': 'Homepage',
  'detail.info.repository': 'Repository',
  'detail.info.docs': 'Docs',
  'detail.info.marketplace': 'Marketplace',
  'detail.info.support': 'Support',
  'detail.info.createdBy': 'CreatedBy',
  'detail.noReadme': 'README 없음.',
  'detail.noVersions': '버전 없음.',

  'errors.noElectron':
    '이 페이지는 Electron 앱 안에서 실행 중이 아닙니다(preload 미주입). 폴더 선택 / npm / 설치 기능을 사용할 수 없습니다. Electron 창에서 여세요.',

  'warn.noPackageJson': 'package.json을 찾을 수 없습니다(프로젝트 루트에 생성하거나 working dir를 지정하세요)',
  'warn.selectProjectDir': 'Unreal 프로젝트 디렉터리를 선택하세요',
  'warn.projectDirMissing': '프로젝트 디렉터리가 존재하지 않습니다: {dir}',
  'warn.noUproject': '팁: 이 디렉터리에서 .uproject를 찾을 수 없습니다(그래도 package.json & Plugins/ 관리는 가능)',
  'warn.npmLsFailed': 'npm ls failed',
  'warn.npmOutdatedFailed': 'npm outdated failed',
  'warn.npmLsJsonParse': 'npm ls JSON 파싱 실패',
  'warn.npmOutdatedJsonParse': 'npm outdated JSON 파싱 실패',

  'settings.title': '설정',
  'settings.close': '닫기',
  'settings.nav.appearance': '외관',
  'settings.nav.registry': '레지스트리(.npmrc)',
  'settings.nav.npm': 'NPM',
  'settings.nav.linking': '링킹',
  'settings.writesTo': '기록 위치:',

  'settings.appearance.title': '외관',
  'settings.appearance.theme': '테마',
  'settings.appearance.theme.system': '시스템',
  'settings.appearance.theme.dark': '다크',
  'settings.appearance.theme.light': '라이트',
  'settings.appearance.theme.hint': '즉시 미리보기; 저장 후 유지됩니다.',
  'settings.appearance.language': '언어',
  'settings.appearance.language.system': '시스템',
  'settings.appearance.language.en': 'English',
  'settings.appearance.language.zh': '中文',
  'settings.appearance.language.ja': '日本語',
  'settings.appearance.language.ko': '한국어',
  'settings.appearance.language.fr': 'Français',
  'settings.appearance.language.de': 'Deutsch',
  'settings.appearance.language.ru': 'Русский',
  'settings.appearance.projects': '프로젝트',
  'settings.appearance.projects.remember': '최근 프로젝트(폴더 경로) 기억',
  'settings.appearance.projects.clear': '프로젝트 기록 지우기',
  'settings.appearance.projects.clear.confirm': '저장된 최근 프로젝트와 마지막 경로를 지울까요?',
  'settings.appearance.ueOnly': 'UE Only 필터',
  'settings.appearance.ueOnly.label': 'Unreal 플러그인 패키지만 표시(키워드/로컬 *.uplugin)',
  'settings.appearance.logPanel': '로그 패널',
  'settings.appearance.logPanel.label': '하단 로그 패널 표시(설치/제거/동기화 후 로그 기록)',

  'settings.registry.title': '프로젝트 .npmrc',
  'settings.registry.needProject': '먼저 프로젝트를 선택하세요(<Project>/.npmrc에 기록).',
  'settings.registry.placeholder.registry': '예: https://registry.npmjs.org/',
  'settings.registry.placeholder.proxy': '예: http://127.0.0.1:7890',
  'settings.registry.scoped.title': 'Scoped Registries',
  'settings.registry.scoped.add': 'Scope 추가',
  'settings.registry.scoped.prompt': 'Scope(예: @myco)',
  'settings.registry.scoped.placeholder': 'registry url',
  'settings.registry.scoped.remove': '제거',
  'settings.registry.scoped.empty': 'scoped registry 없음',
  'settings.registry.test.title': '레지스트리 테스트',
  'settings.registry.test.hint': 'registry/proxy/auth 동작 여부를 빠르게 확인(프로젝트 .npmrc 사용).',

  'settings.npm.title': 'NPM',
  'settings.npm.path': 'Npm 실행 파일 경로',
  'settings.npm.path.placeholder': '비움=PATH의 npm 사용(Windows: npm.cmd)',

  'settings.linking.title': '링킹',
  'settings.linking.pluginsRoot': 'Plugins 루트',
  'settings.linking.pluginsRoot.placeholder': '비움=<Project>/Plugins 사용',
  'settings.linking.pick': '선택…',
  'settings.linking.reset': '초기화',
  'settings.linking.pickDialogTitle': 'Plugins 루트 선택(기본 <Project>/Plugins)',
  'settings.linking.autoLink': 'UE 플러그인 자동 링크',
  'settings.linking.autoLink.label': '설치/제거 후 node_modules → Plugins/ 링크 자동 동기화',
  'settings.linking.autoLink.hint': 'Windows는 기본 Junction(mklink /J), macOS/Linux는 symlink. 복사 모드로 전환 가능.',
  'settings.linking.mode.link': 'Link(symlink/junction)',
  'settings.linking.mode.copy': 'Copy',

  'settings.footer.reload': '다시 불러오기',
  'settings.footer.save': '저장',

  'dialogs.selectProject.title': 'Unreal 프로젝트 폴더 선택(.uproject 포함)',
  'dialogs.selectDir.title': '폴더 선택',

  'alert.title': '알림',
  'alert.ok': '확인',

  'links.log.title': '링크 동기화',
  'links.log.ok': 'ok: {value}',
  'links.log.linked': 'linked: {value}',
  'links.log.removed': 'removed: {value}',
  'links.log.warnings': 'warnings:',
  'links.log.error': 'error: {value}'
}

const fr: Record<MessageKey, string> = {
  'app.title': 'Unreal Package Manager',

  'tabs.registry': 'Mon registre',
  'tabs.project': 'Dans le projet',
  'tabs.updates': 'Mises à jour',

  'search.registry.placeholder': 'Rechercher dans le registre...',
  'search.filter.placeholder': 'Filtrer...',

  'actions.selectProject': 'Choisir un projet',
  'actions.refresh': 'Rafraîchir',
  'actions.settings': 'Paramètres',

  'meta.project': 'Project',
  'meta.registry': 'Registry',
  'meta.pluginsRoot': 'Plugins Root',
  'meta.unselected': 'Non sélectionné',
  'meta.projectNpmrc': '(project .npmrc)',
  'meta.unknown': '-',

  'list.count': '{shown} / {total} items',
  'list.loading': ' · loading…',
  'list.context.show': 'Afficher détails',
  'list.context.hide': 'Masquer détails',

  'projects.title': 'Projets',
  'projects.search.placeholder': 'Rechercher des dossiers...',
  'projects.empty': 'Aucun projet récent.',
  'projects.disabled': 'Historique désactivé.',
  'projects.empty.desc': 'Cliquez sur « Choisir un projet » ci-dessus pour en ajouter un.',
  'projects.disabled.desc': 'Activez « Mémoriser les projets récents » dans Paramètres pour afficher l’historique ici.',
  'projects.toggle.show': 'Afficher projets',
  'projects.toggle.hide': 'Masquer projets',
  'projects.context.title': 'Détails du projet',
  'projects.context.show': 'Afficher détails',
  'projects.context.hide': 'Masquer détails',
  'projects.remove': 'Retirer de l’historique',
  'projects.remove.confirm': 'Retirer ce chemin de l’historique ?\n\n{path}',

  'status.remote': 'REGISTRE',
  'status.installed': 'INSTALLÉ',
  'status.update_available': 'MAJ',
  'status.missing': 'MANQUANT',

  'empty.noProject.title': 'Aucun projet sélectionné',
  'empty.noProject.desc': 'Cliquez sur « Choisir un projet » en haut à droite.',
  'empty.registry.start.title': 'Commencer la recherche',
  'empty.registry.start.desc': 'Saisissez un mot-clé ci-dessus pour rechercher.',
  'empty.registry.noResults.title': 'Aucun paquet trouvé',
  'empty.registry.noResults.desc': 'Essayez un mot-clé plus précis ou vérifiez les paramètres/filtre du registre.',
  'empty.registry.noResults.help.header': 'Si vous utilisez le registre public :',
  'empty.registry.noResults.help.save': '- Cliquez sur « Enregistrer » dans Paramètres (écrit le .npmrc du projet)',
  'empty.registry.noResults.help.query': '- Essayez une requête plus précise',
  'empty.registry.noResults.help.filter': '- Désactivez le filtre « UE Only » (les paquets publics ont rarement UE)',
  'empty.updates.title': 'Aucune mise à jour',
  'empty.updates.desc': 'Ce projet n’a aucun paquet à mettre à jour.',
  'empty.project.title': 'Liste vide',
  'empty.project.desc': 'Ce projet n’a aucun paquet installé.',

  'detail.selectPrompt': 'Sélectionnez un paquet à gauche',

  'log.title': 'JOURNAL',
  'log.noLog': 'Aucun journal.',
  'log.copy': 'Copier',
  'log.copied': 'Copié',
  'log.copyFailed': 'Échec de copie',
  'log.toggle.show': 'Afficher',
  'log.toggle.hide': 'Masquer',
  'log.clear': 'Vider',

  'detail.installed': 'installed {version}',
  'detail.notInstalled': 'not installed',
  'detail.latest': ' · latest {version}',
  'detail.versionTag.placeholder': 'version/tag (latest par défaut)',

  'detail.action.install': 'Installer',
  'detail.action.update': 'Mettre à jour',
  'detail.action.remove': 'Supprimer',
  'detail.action.syncLinks': 'Synchroniser les liens',

  'detail.installKind.title': 'dependencies : runtime (recommandé) ; devDependencies : dev/build uniquement',
  'detail.installKind.runtime': 'dependencies (recommandé)',
  'detail.installKind.dev': 'devDependencies (dev/build)',
  'detail.installKind.hint': 'En cas de doute : plugins UE → dependencies ; outils/scripts → devDependencies.',

  'detail.tabs.info': 'INFO',
  'detail.tabs.readme': 'README',
  'detail.tabs.versions': 'VERSIONS',
  'detail.info.version': 'Version',
  'detail.info.license': 'Licence',
  'detail.info.author': 'Auteur',
  'detail.info.homepage': 'Accueil',
  'detail.info.repository': 'Dépôt',
  'detail.info.docs': 'Docs',
  'detail.info.marketplace': 'Marketplace',
  'detail.info.support': 'Support',
  'detail.info.createdBy': 'CreatedBy',
  'detail.noReadme': 'Aucun readme.',
  'detail.noVersions': 'Aucune version.',

  'errors.noElectron':
    'Cette page ne s’exécute pas dans l’application Electron (preload non injecté). La sélection de dossier / npm / installation ne fonctionne pas. Ouvrez-la dans la fenêtre Electron.',

  'warn.noPackageJson': 'package.json introuvable (créez-le à la racine du projet ou définissez le working dir)',
  'warn.selectProjectDir': 'Veuillez sélectionner un répertoire de projet Unreal',
  'warn.projectDirMissing': 'Le répertoire du projet n’existe pas : {dir}',
  'warn.noUproject': 'Astuce : .uproject introuvable dans ce dossier (vous pouvez quand même gérer package.json & Plugins/)',
  'warn.npmLsFailed': 'npm ls failed',
  'warn.npmOutdatedFailed': 'npm outdated failed',
  'warn.npmLsJsonParse': 'Échec d’analyse du JSON npm ls',
  'warn.npmOutdatedJsonParse': 'Échec d’analyse du JSON npm outdated',

  'settings.title': 'Paramètres',
  'settings.close': 'Fermer',
  'settings.nav.appearance': 'Apparence',
  'settings.nav.registry': 'Registre (.npmrc)',
  'settings.nav.npm': 'NPM',
  'settings.nav.linking': 'Liens',
  'settings.writesTo': 'Écrit dans :',

  'settings.appearance.title': 'Apparence',
  'settings.appearance.theme': 'Thème',
  'settings.appearance.theme.system': 'Système',
  'settings.appearance.theme.dark': 'Sombre',
  'settings.appearance.theme.light': 'Clair',
  'settings.appearance.theme.hint': 'Aperçu immédiat ; persiste après enregistrement.',
  'settings.appearance.language': 'Langue',
  'settings.appearance.language.system': 'Système',
  'settings.appearance.language.en': 'English',
  'settings.appearance.language.zh': '中文',
  'settings.appearance.language.ja': '日本語',
  'settings.appearance.language.ko': '한국어',
  'settings.appearance.language.fr': 'Français',
  'settings.appearance.language.de': 'Deutsch',
  'settings.appearance.language.ru': 'Русский',
  'settings.appearance.projects': 'Projets',
  'settings.appearance.projects.remember': 'Mémoriser les projets récents (chemins de dossiers)',
  'settings.appearance.projects.clear': 'Effacer l’historique des projets',
  'settings.appearance.projects.clear.confirm': 'Effacer les projets récents enregistrés et le dernier chemin ?',
  'settings.appearance.ueOnly': 'Filtre UE Only',
  'settings.appearance.ueOnly.label': 'Afficher uniquement les plugins Unreal (mots-clés / *.uplugin local)',
  'settings.appearance.logPanel': 'Panneau de journal',
  'settings.appearance.logPanel.label': 'Afficher le journal en bas (mise à jour après install/suppression/sync)',

  'settings.registry.title': '.npmrc du projet',
  'settings.registry.needProject': 'Sélectionnez d’abord un projet (écrit dans <Project>/.npmrc).',
  'settings.registry.placeholder.registry': 'ex. https://registry.npmjs.org/',
  'settings.registry.placeholder.proxy': 'ex. http://127.0.0.1:7890',
  'settings.registry.scoped.title': 'Registres par scope',
  'settings.registry.scoped.add': 'Ajouter un scope',
  'settings.registry.scoped.prompt': 'Scope (ex. @myco)',
  'settings.registry.scoped.placeholder': 'registry url',
  'settings.registry.scoped.remove': 'Supprimer',
  'settings.registry.scoped.empty': 'Aucun registre par scope',
  'settings.registry.test.title': 'Test du registre',
  'settings.registry.test.hint': 'Vérifie rapidement registry/proxy/auth (utilise le .npmrc du projet).',

  'settings.npm.title': 'NPM',
  'settings.npm.path': 'Chemin de l’exécutable npm',
  'settings.npm.path.placeholder': 'Vide = utiliser npm du PATH (Windows : npm.cmd)',

  'settings.linking.title': 'Liens',
  'settings.linking.pluginsRoot': 'Racine Plugins',
  'settings.linking.pluginsRoot.placeholder': 'Vide = utiliser <Project>/Plugins',
  'settings.linking.pick': 'Choisir…',
  'settings.linking.reset': 'Réinitialiser',
  'settings.linking.pickDialogTitle': 'Sélectionner la racine Plugins (par défaut <Project>/Plugins)',
  'settings.linking.autoLink': 'Lien auto des plugins UE',
  'settings.linking.autoLink.label': 'Synchroniser automatiquement node_modules → Plugins/ après install/suppression',
  'settings.linking.autoLink.hint':
    'Windows utilise Junction (mklink /J) par défaut ; macOS/Linux utilise symlink. Vous pouvez passer en mode copie.',
  'settings.linking.mode.link': 'Link (symlink/junction)',
  'settings.linking.mode.copy': 'Copy',

  'settings.footer.reload': 'Recharger',
  'settings.footer.save': 'Enregistrer',

  'dialogs.selectProject.title': 'Sélectionner le dossier du projet Unreal (contient .uproject)',
  'dialogs.selectDir.title': 'Sélectionner un dossier',

  'alert.title': 'Alerte',
  'alert.ok': 'OK',

  'links.log.title': 'Synchroniser les liens',
  'links.log.ok': 'ok: {value}',
  'links.log.linked': 'linked: {value}',
  'links.log.removed': 'removed: {value}',
  'links.log.warnings': 'warnings:',
  'links.log.error': 'error: {value}'
}

const de: Record<MessageKey, string> = {
  'app.title': 'Unreal Package Manager',

  'tabs.registry': 'Registry',
  'tabs.project': 'Im Projekt',
  'tabs.updates': 'Updates',

  'search.registry.placeholder': 'Registry durchsuchen...',
  'search.filter.placeholder': 'Filtern...',

  'actions.selectProject': 'Projekt auswählen',
  'actions.refresh': 'Aktualisieren',
  'actions.settings': 'Einstellungen',

  'meta.project': 'Project',
  'meta.registry': 'Registry',
  'meta.pluginsRoot': 'Plugins Root',
  'meta.unselected': 'Nicht ausgewählt',
  'meta.projectNpmrc': '(project .npmrc)',
  'meta.unknown': '-',

  'list.count': '{shown} / {total} items',
  'list.loading': ' · loading…',
  'list.context.show': 'Details anzeigen',
  'list.context.hide': 'Details ausblenden',

  'projects.title': 'Projekte',
  'projects.search.placeholder': 'Ordner suchen...',
  'projects.empty': 'Keine letzten Projekte.',
  'projects.disabled': 'Verlauf ist deaktiviert.',
  'projects.empty.desc': 'Oben auf „Projekt auswählen“ klicken, um eins hinzuzufügen.',
  'projects.disabled.desc': 'Aktiviere „Letzte Projekte merken“ in den Einstellungen, um den Verlauf hier zu sehen.',
  'projects.toggle.show': 'Projekte anzeigen',
  'projects.toggle.hide': 'Projekte ausblenden',
  'projects.context.title': 'Projektdetails',
  'projects.context.show': 'Details anzeigen',
  'projects.context.hide': 'Details ausblenden',
  'projects.remove': 'Aus Verlauf entfernen',
  'projects.remove.confirm': 'Diesen Pfad aus dem Verlauf entfernen?\n\n{path}',

  'status.remote': 'REGISTRY',
  'status.installed': 'INSTALLIERT',
  'status.update_available': 'UPDATE',
  'status.missing': 'FEHLT',

  'empty.noProject.title': 'Kein Projekt ausgewählt',
  'empty.noProject.desc': 'Klicke oben rechts auf „Projekt auswählen“.',
  'empty.registry.start.title': 'Suche starten',
  'empty.registry.start.desc': 'Oben ein Stichwort eingeben, um zu suchen.',
  'empty.registry.noResults.title': 'Keine Pakete gefunden',
  'empty.registry.noResults.desc': 'Versuche ein genaueres Stichwort oder prüfe Registry-Einstellungen und Filter.',
  'empty.registry.noResults.help.header': 'Wenn du die öffentliche Registry nutzt:',
  'empty.registry.noResults.help.save': '- In Einstellungen „Speichern“ klicken (schreibt Projekt-.npmrc)',
  'empty.registry.noResults.help.query': '- Ein genaueres Suchwort probieren',
  'empty.registry.noResults.help.filter': '- „UE Only“-Filter deaktivieren (öffentliche Pakete haben selten UE)',
  'empty.updates.title': 'Keine Updates',
  'empty.updates.desc': 'Dieses Projekt hat keine aktualisierbaren Pakete.',
  'empty.project.title': 'Leere Liste',
  'empty.project.desc': 'Dieses Projekt hat keine installierten Pakete.',

  'detail.selectPrompt': 'Bitte links ein Paket auswählen',

  'log.title': 'LOG',
  'log.noLog': 'Kein Log.',
  'log.copy': 'Kopieren',
  'log.copied': 'Kopiert',
  'log.copyFailed': 'Kopieren fehlgeschlagen',
  'log.toggle.show': 'Anzeigen',
  'log.toggle.hide': 'Ausblenden',
  'log.clear': 'Leeren',

  'detail.installed': 'installed {version}',
  'detail.notInstalled': 'not installed',
  'detail.latest': ' · latest {version}',
  'detail.versionTag.placeholder': 'version/tag (Standard latest)',

  'detail.action.install': 'Installieren',
  'detail.action.update': 'Update',
  'detail.action.remove': 'Entfernen',
  'detail.action.syncLinks': 'Links synchronisieren',

  'detail.installKind.title': 'dependencies: Laufzeit (empfohlen); devDependencies: nur Dev/Build',
  'detail.installKind.runtime': 'dependencies (empfohlen)',
  'detail.installKind.dev': 'devDependencies (Dev/Build)',
  'detail.installKind.hint': 'Unsicher? UE-Plugins meist dependencies; Tools/Skripte devDependencies.',

  'detail.tabs.info': 'INFO',
  'detail.tabs.readme': 'README',
  'detail.tabs.versions': 'VERSIONS',
  'detail.info.version': 'Version',
  'detail.info.license': 'Lizenz',
  'detail.info.author': 'Autor',
  'detail.info.homepage': 'Homepage',
  'detail.info.repository': 'Repository',
  'detail.info.docs': 'Docs',
  'detail.info.marketplace': 'Marketplace',
  'detail.info.support': 'Support',
  'detail.info.createdBy': 'CreatedBy',
  'detail.noReadme': 'Kein Readme.',
  'detail.noVersions': 'Keine Versionen.',

  'errors.noElectron':
    'Diese Seite läuft nicht in der Electron-App (preload nicht injiziert). Ordnerauswahl / npm / Installation funktionieren nicht. Bitte im Electron-Fenster öffnen.',

  'warn.noPackageJson': 'package.json nicht gefunden (im Projekt-Root erstellen oder working dir angeben)',
  'warn.selectProjectDir': 'Bitte ein Unreal-Projektverzeichnis auswählen',
  'warn.projectDirMissing': 'Projektverzeichnis existiert nicht: {dir}',
  'warn.noUproject': 'Hinweis: .uproject in diesem Verzeichnis nicht gefunden (package.json & Plugins/ können dennoch verwaltet werden)',
  'warn.npmLsFailed': 'npm ls failed',
  'warn.npmOutdatedFailed': 'npm outdated failed',
  'warn.npmLsJsonParse': 'npm ls JSON konnte nicht geparst werden',
  'warn.npmOutdatedJsonParse': 'npm outdated JSON konnte nicht geparst werden',

  'settings.title': 'Einstellungen',
  'settings.close': 'Schließen',
  'settings.nav.appearance': 'Darstellung',
  'settings.nav.registry': 'Registry (.npmrc)',
  'settings.nav.npm': 'NPM',
  'settings.nav.linking': 'Verknüpfung',
  'settings.writesTo': 'Schreibt nach:',

  'settings.appearance.title': 'Darstellung',
  'settings.appearance.theme': 'Theme',
  'settings.appearance.theme.system': 'System',
  'settings.appearance.theme.dark': 'Dunkel',
  'settings.appearance.theme.light': 'Hell',
  'settings.appearance.theme.hint': 'Sofortige Vorschau; nach dem Speichern dauerhaft.',
  'settings.appearance.language': 'Sprache',
  'settings.appearance.language.system': 'System',
  'settings.appearance.language.en': 'English',
  'settings.appearance.language.zh': '中文',
  'settings.appearance.language.ja': '日本語',
  'settings.appearance.language.ko': '한국어',
  'settings.appearance.language.fr': 'Français',
  'settings.appearance.language.de': 'Deutsch',
  'settings.appearance.language.ru': 'Русский',
  'settings.appearance.projects': 'Projekte',
  'settings.appearance.projects.remember': 'Letzte Projekte merken (Ordnerpfade)',
  'settings.appearance.projects.clear': 'Projektverlauf löschen',
  'settings.appearance.projects.clear.confirm': 'Gespeicherte letzte Projekte und letzten Pfad löschen?',
  'settings.appearance.ueOnly': 'UE Only Filter',
  'settings.appearance.ueOnly.label': 'Nur Unreal-Plugin-Pakete anzeigen (Keywords / lokales *.uplugin)',
  'settings.appearance.logPanel': 'Log-Panel',
  'settings.appearance.logPanel.label': 'Unteres Log-Panel anzeigen (nach Install/Remove/Sync aktualisiert)',

  'settings.registry.title': 'Projekt .npmrc',
  'settings.registry.needProject': 'Zuerst ein Projekt auswählen (schreibt <Project>/.npmrc).',
  'settings.registry.placeholder.registry': 'z.B. https://registry.npmjs.org/',
  'settings.registry.placeholder.proxy': 'z.B. http://127.0.0.1:7890',
  'settings.registry.scoped.title': 'Scoped Registries',
  'settings.registry.scoped.add': 'Scope hinzufügen',
  'settings.registry.scoped.prompt': 'Scope (z.B. @myco)',
  'settings.registry.scoped.placeholder': 'registry url',
  'settings.registry.scoped.remove': 'Entfernen',
  'settings.registry.scoped.empty': 'Keine scoped registry',
  'settings.registry.test.title': 'Registry-Test',
  'settings.registry.test.hint': 'Schnell prüfen, ob registry/proxy/auth funktioniert (Projekt-.npmrc).',

  'settings.npm.title': 'NPM',
  'settings.npm.path': 'Pfad zur npm-Exe',
  'settings.npm.path.placeholder': 'Leer = npm aus PATH verwenden (Windows: npm.cmd)',

  'settings.linking.title': 'Verknüpfung',
  'settings.linking.pluginsRoot': 'Plugins-Root',
  'settings.linking.pluginsRoot.placeholder': 'Leer = <Project>/Plugins verwenden',
  'settings.linking.pick': 'Auswählen…',
  'settings.linking.reset': 'Zurücksetzen',
  'settings.linking.pickDialogTitle': 'Plugins-Root auswählen (Standard <Project>/Plugins)',
  'settings.linking.autoLink': 'UE-Plugins automatisch verknüpfen',
  'settings.linking.autoLink.label': 'Nach Install/Remove node_modules → Plugins/ Links automatisch synchronisieren',
  'settings.linking.autoLink.hint':
    'Windows nutzt standardmäßig Junction (mklink /J), macOS/Linux symlink. Umschaltbar auf Kopiermodus.',
  'settings.linking.mode.link': 'Link (symlink/junction)',
  'settings.linking.mode.copy': 'Copy',

  'settings.footer.reload': 'Neu laden',
  'settings.footer.save': 'Speichern',

  'dialogs.selectProject.title': 'Unreal-Projektordner auswählen (enthält .uproject)',
  'dialogs.selectDir.title': 'Ordner auswählen',

  'alert.title': 'Hinweis',
  'alert.ok': 'OK',

  'links.log.title': 'Links synchronisieren',
  'links.log.ok': 'ok: {value}',
  'links.log.linked': 'linked: {value}',
  'links.log.removed': 'removed: {value}',
  'links.log.warnings': 'warnings:',
  'links.log.error': 'error: {value}'
}

const ru: Record<MessageKey, string> = {
  'app.title': 'Unreal Package Manager',

  'tabs.registry': 'Реестр',
  'tabs.project': 'В проекте',
  'tabs.updates': 'Обновления',

  'search.registry.placeholder': 'Поиск в реестре...',
  'search.filter.placeholder': 'Фильтр...',

  'actions.selectProject': 'Выбрать проект',
  'actions.refresh': 'Обновить',
  'actions.settings': 'Настройки',

  'meta.project': 'Project',
  'meta.registry': 'Registry',
  'meta.pluginsRoot': 'Plugins Root',
  'meta.unselected': 'Не выбрано',
  'meta.projectNpmrc': '(project .npmrc)',
  'meta.unknown': '-',

  'list.count': '{shown} / {total} items',
  'list.loading': ' · loading…',
  'list.context.show': 'Показать сведения',
  'list.context.hide': 'Скрыть сведения',

  'projects.title': 'Проекты',
  'projects.search.placeholder': 'Поиск папок...',
  'projects.empty': 'Нет недавних проектов.',
  'projects.disabled': 'История отключена.',
  'projects.empty.desc': 'Нажмите «Выбрать проект» выше, чтобы добавить.',
  'projects.disabled.desc': 'Включите «Запоминать последние проекты» в настройках, чтобы видеть историю здесь.',
  'projects.toggle.show': 'Показать проекты',
  'projects.toggle.hide': 'Скрыть проекты',
  'projects.context.title': 'Детали проекта',
  'projects.context.show': 'Показать детали',
  'projects.context.hide': 'Скрыть детали',
  'projects.remove': 'Удалить из истории',
  'projects.remove.confirm': 'Удалить этот путь из истории?\n\n{path}',

  'status.remote': 'РЕЕСТР',
  'status.installed': 'УСТАНОВЛЕНО',
  'status.update_available': 'ОБНОВЛ.',
  'status.missing': 'НЕТ',

  'empty.noProject.title': 'Проект не выбран',
  'empty.noProject.desc': 'Нажмите «Выбрать проект» в правом верхнем углу.',
  'empty.registry.start.title': 'Начните поиск',
  'empty.registry.start.desc': 'Введите ключевое слово сверху для поиска.',
  'empty.registry.noResults.title': 'Пакеты не найдены',
  'empty.registry.noResults.desc': 'Попробуйте более точный запрос или проверьте настройки реестра и фильтры.',
  'empty.registry.noResults.help.header': 'Если используете публичный реестр:',
  'empty.registry.noResults.help.save': '- Нажмите «Сохранить» в настройках (запишет project .npmrc)',
  'empty.registry.noResults.help.query': '- Попробуйте более конкретный запрос',
  'empty.registry.noResults.help.filter': '- Отключите фильтр «UE Only» (у публичных пакетов редко есть UE)',
  'empty.updates.title': 'Нет обновлений',
  'empty.updates.desc': 'В этом проекте нет пакетов для обновления.',
  'empty.project.title': 'Пустой список',
  'empty.project.desc': 'В этом проекте нет установленных пакетов.',

  'detail.selectPrompt': 'Выберите пакет слева',

  'log.title': 'ЛОГ',
  'log.noLog': 'Нет лога.',
  'log.copy': 'Копировать',
  'log.copied': 'Скопировано',
  'log.copyFailed': 'Не удалось скопировать',
  'log.toggle.show': 'Показать',
  'log.toggle.hide': 'Скрыть',
  'log.clear': 'Очистить',

  'detail.installed': 'installed {version}',
  'detail.notInstalled': 'not installed',
  'detail.latest': ' · latest {version}',
  'detail.versionTag.placeholder': 'version/tag (по умолчанию latest)',

  'detail.action.install': 'Установить',
  'detail.action.update': 'Обновить',
  'detail.action.remove': 'Удалить',
  'detail.action.syncLinks': 'Синхр. ссылки',

  'detail.installKind.title': 'dependencies: runtime (рекомендуется); devDependencies: только dev/build',
  'detail.installKind.runtime': 'dependencies (рекомендуется)',
  'detail.installKind.dev': 'devDependencies (dev/build)',
  'detail.installKind.hint': 'Если сомневаетесь: UE-плагины — dependencies; инструменты/скрипты — devDependencies.',

  'detail.tabs.info': 'ИНФО',
  'detail.tabs.readme': 'README',
  'detail.tabs.versions': 'ВЕРСИИ',
  'detail.info.version': 'Версия',
  'detail.info.license': 'Лицензия',
  'detail.info.author': 'Автор',
  'detail.info.homepage': 'Сайт',
  'detail.info.repository': 'Репозиторий',
  'detail.info.docs': 'Документация',
  'detail.info.marketplace': 'Marketplace',
  'detail.info.support': 'Поддержка',
  'detail.info.createdBy': 'CreatedBy',
  'detail.noReadme': 'Нет readme.',
  'detail.noVersions': 'Нет версий.',

  'errors.noElectron':
    'Эта страница не запущена внутри Electron-приложения (preload не внедрён). Выбор папок / npm / установка не работают. Откройте в окне Electron.',

  'warn.noPackageJson': 'package.json не найден (создайте в корне проекта или укажите working dir)',
  'warn.selectProjectDir': 'Пожалуйста, выберите каталог Unreal-проекта',
  'warn.projectDirMissing': 'Каталог проекта не существует: {dir}',
  'warn.noUproject': 'Подсказка: .uproject не найден в этой папке (но можно управлять package.json & Plugins/)',
  'warn.npmLsFailed': 'npm ls failed',
  'warn.npmOutdatedFailed': 'npm outdated failed',
  'warn.npmLsJsonParse': 'Не удалось разобрать JSON npm ls',
  'warn.npmOutdatedJsonParse': 'Не удалось разобрать JSON npm outdated',

  'settings.title': 'Настройки',
  'settings.close': 'Закрыть',
  'settings.nav.appearance': 'Внешний вид',
  'settings.nav.registry': 'Реестр (.npmrc)',
  'settings.nav.npm': 'NPM',
  'settings.nav.linking': 'Линки',
  'settings.writesTo': 'Записывает в:',

  'settings.appearance.title': 'Внешний вид',
  'settings.appearance.theme': 'Тема',
  'settings.appearance.theme.system': 'Система',
  'settings.appearance.theme.dark': 'Тёмная',
  'settings.appearance.theme.light': 'Светлая',
  'settings.appearance.theme.hint': 'Предпросмотр сразу; сохраняется после сохранения.',
  'settings.appearance.language': 'Язык',
  'settings.appearance.language.system': 'Система',
  'settings.appearance.language.en': 'English',
  'settings.appearance.language.zh': '中文',
  'settings.appearance.language.ja': '日本語',
  'settings.appearance.language.ko': '한국어',
  'settings.appearance.language.fr': 'Français',
  'settings.appearance.language.de': 'Deutsch',
  'settings.appearance.language.ru': 'Русский',
  'settings.appearance.projects': 'Проекты',
  'settings.appearance.projects.remember': 'Запоминать последние проекты (пути к папкам)',
  'settings.appearance.projects.clear': 'Очистить историю проектов',
  'settings.appearance.projects.clear.confirm': 'Очистить сохранённые недавние проекты и последний путь?',
  'settings.appearance.ueOnly': 'Фильтр UE Only',
  'settings.appearance.ueOnly.label': 'Показывать только Unreal-плагины (ключевые слова / локальный *.uplugin)',
  'settings.appearance.logPanel': 'Панель логов',
  'settings.appearance.logPanel.label': 'Показывать нижнюю панель логов (после install/remove/sync)',

  'settings.registry.title': 'Project .npmrc',
  'settings.registry.needProject': 'Сначала выберите проект (запись в <Project>/.npmrc).',
  'settings.registry.placeholder.registry': 'напр. https://registry.npmjs.org/',
  'settings.registry.placeholder.proxy': 'напр. http://127.0.0.1:7890',
  'settings.registry.scoped.title': 'Scoped Registries',
  'settings.registry.scoped.add': 'Добавить scope',
  'settings.registry.scoped.prompt': 'Scope (напр. @myco)',
  'settings.registry.scoped.placeholder': 'registry url',
  'settings.registry.scoped.remove': 'Удалить',
  'settings.registry.scoped.empty': 'Нет scoped registry',
  'settings.registry.test.title': 'Тест реестра',
  'settings.registry.test.hint': 'Быстрая проверка registry/proxy/auth (использует project .npmrc).',

  'settings.npm.title': 'NPM',
  'settings.npm.path': 'Путь к npm',
  'settings.npm.path.placeholder': 'Пусто = npm из PATH (Windows: npm.cmd)',

  'settings.linking.title': 'Линки',
  'settings.linking.pluginsRoot': 'Корень Plugins',
  'settings.linking.pluginsRoot.placeholder': 'Пусто = <Project>/Plugins',
  'settings.linking.pick': 'Выбрать…',
  'settings.linking.reset': 'Сбросить',
  'settings.linking.pickDialogTitle': 'Выберите корень Plugins (по умолчанию <Project>/Plugins)',
  'settings.linking.autoLink': 'Авто-линк UE плагинов',
  'settings.linking.autoLink.label': 'Авто-синхронизация node_modules → Plugins/ после install/remove',
  'settings.linking.autoLink.hint':
    'Windows по умолчанию использует Junction (mklink /J), macOS/Linux — symlink. Можно переключить на копирование.',
  'settings.linking.mode.link': 'Link (symlink/junction)',
  'settings.linking.mode.copy': 'Copy',

  'settings.footer.reload': 'Перезагрузить',
  'settings.footer.save': 'Сохранить',

  'dialogs.selectProject.title': 'Выберите папку Unreal-проекта (содержит .uproject)',
  'dialogs.selectDir.title': 'Выберите папку',

  'alert.title': 'Уведомление',
  'alert.ok': 'OK',

  'links.log.title': 'Синхронизация ссылок',
  'links.log.ok': 'ok: {value}',
  'links.log.linked': 'linked: {value}',
  'links.log.removed': 'removed: {value}',
  'links.log.warnings': 'warnings:',
  'links.log.error': 'error: {value}'
}

const TRANSLATIONS: Record<ResolvedLanguage, Record<MessageKey, string>> = {
  en,
  zh,
  ja,
  ko,
  fr,
  de,
  ru
}

const normalizeLocale = (value: string) => value.trim().toLowerCase().replace('_', '-')

const localeToLang = (locale: string): ResolvedLanguage => {
  const l = normalizeLocale(locale)
  if (l.startsWith('zh')) return 'zh'
  if (l.startsWith('ja')) return 'ja'
  if (l.startsWith('ko')) return 'ko'
  if (l.startsWith('fr')) return 'fr'
  if (l.startsWith('de')) return 'de'
  if (l.startsWith('ru')) return 'ru'
  return 'en'
}

export const resolveLanguage = (pref: UiLanguage | null | undefined, locales: readonly string[]): ResolvedLanguage => {
  if (pref && pref !== 'system') return pref
  for (const loc of locales) {
    const candidate = localeToLang(loc)
    if (candidate) return candidate
  }
  return 'en'
}

const format = (tmpl: string, vars?: Vars) => {
  if (!vars) return tmpl
  return tmpl.replace(/\{(\w+)\}/g, (_m, key: string) => {
    const v = vars[key]
    return typeof v === 'undefined' ? '' : String(v)
  })
}

export const createTranslator = (lang: ResolvedLanguage) => {
  const dict = TRANSLATIONS[lang] ?? TRANSLATIONS.en
  return (key: MessageKey, vars?: Vars) => format(dict[key] ?? TRANSLATIONS.en[key] ?? String(key), vars)
}
